(()=>{var e={};e.id=309,e.ids=[309],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},18223:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>d}),s(16863),s(11506),s(35866);var r=s(23191),a=s(88716),n=s(37922),i=s.n(n),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["qa",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,16863)),"E:\\Code\\1C\\sgr-deep-research\\frontend\\app\\qa\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,11506)),"E:\\Code\\1C\\sgr-deep-research\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\Code\\1C\\sgr-deep-research\\frontend\\app\\qa\\page.tsx"],p="/qa/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/qa/page",pathname:"/qa",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},66930:(e,t,s)=>{Promise.resolve().then(s.bind(s,43669))},91986:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},19693:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,79404,23))},43669:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(10326),a=s(17577),n=s(3679),i=s(84231),l=s(9007),o=s(78998),d=s(6824);function c(){let[e,t]=(0,a.useState)(""),[s,c]=(0,a.useState)(""),[p,u]=(0,a.useState)(12),[h,x]=(0,a.useState)(2),[m,j]=(0,a.useState)(!1),[f,g]=(0,a.useState)(null),[v,y]=(0,a.useState)(null),b=async()=>{if(y(null),g(null),!e.trim()||!s.trim()){y("Specify both collection and question.");return}j(!0);let t={collection:e.trim(),question:s.trim(),top_k:p,max_hops:h},r=await (0,d.N)({path:"/qa",method:"POST",body:t});if(j(!1),!r.ok||!r.data){y(r.error??"Request failed.");return}g(r.data)};return(0,r.jsxs)("div",{className:"stack",children:[v&&r.jsx(o.F,{message:v,variant:"error",onClose:()=>y(null)}),(0,r.jsxs)("section",{className:"panel stack",children:[r.jsx("h2",{children:"Ask a Question"}),r.jsx("p",{className:"text-muted",children:"The answer will be generated in Russian strictly from indexed context. When evidence is missing the model returns the refusal phrase."}),r.jsx(i.I,{label:"Collection",value:e,onChange:e=>t(e.target.value)}),(0,r.jsxs)("label",{className:"field",children:[r.jsx("span",{className:"field-label",children:"Question"}),r.jsx("textarea",{className:"field-input",rows:5,value:s,onChange:e=>c(e.target.value),placeholder:"Example: Which routines write to register Sales.Turnover?"})]}),(0,r.jsxs)("div",{className:"inline",children:[r.jsx(i.I,{label:"Top K (vectors)",type:"number",min:1,max:50,value:p,onChange:e=>u(Number(e.target.value)),style:{maxWidth:"140px"}}),r.jsx(i.I,{label:"Max hops (graph)",type:"number",min:0,max:4,value:h,onChange:e=>x(Number(e.target.value)),style:{maxWidth:"140px"}})]}),r.jsx(n.z,{onClick:b,loading:m,disabled:m,children:"Ask"})]}),m&&(0,r.jsxs)("section",{className:"panel inline",style:{alignItems:"center"},children:[r.jsx(l.$,{}),r.jsx("span",{children:"Generating answerâ€¦"})]}),f&&!m&&(0,r.jsxs)("section",{className:"panel stack",children:[(0,r.jsxs)("header",{children:[r.jsx("h2",{children:"Answer"}),(0,r.jsxs)("p",{className:"text-muted",children:["Confidence: ",(100*f.confidence).toFixed(1),"%"]})]}),r.jsx("div",{className:"card",children:r.jsx("p",{children:f.answer})}),(0,r.jsxs)("div",{className:"card stack",children:[r.jsx("h3",{children:"Citations"}),0===f.citations.length?r.jsx("p",{className:"text-muted",children:"No supporting chunks were returned."}):f.citations.map((e,t)=>(0,r.jsxs)("div",{className:"citation",children:[r.jsx("h4",{children:e.title}),e.path&&r.jsx("p",{className:"text-muted",children:e.path}),r.jsx("p",{children:e.snippet})]},`${e.title}-${t}`))]}),(0,r.jsxs)("div",{className:"card stack",children:[r.jsx("h3",{children:"Graph Paths"}),0===f.graph_paths.length?r.jsx("p",{className:"text-muted",children:"No related graph context was found."}):f.graph_paths.map((e,t)=>(0,r.jsxs)("div",{className:"graph-path",children:[(0,r.jsxs)("strong",{children:["Path ",t+1]}),r.jsx("ul",{children:e.nodes.map(e=>(0,r.jsxs)("li",{children:[e.label,": ",e.title??e.id]},e.id))}),r.jsx("div",{className:"text-muted",children:e.edges.map(e=>`${e.source} -[${e.type}]-> ${e.target}`).join(" | ")})]},t))]}),f.cypher_used.length>0&&(0,r.jsxs)("div",{className:"card stack",children:[r.jsx("h3",{children:"Cypher Queries"}),r.jsx("ul",{className:"file-list",children:f.cypher_used.map((e,t)=>r.jsx("li",{style:{whiteSpace:"pre-wrap"},children:e},t))})]})]})]})}},3679:(e,t,s)=>{"use strict";s.d(t,{z:()=>i});var r=s(10326),a=s(48029),n=s.n(a);function i({className:e,variant:t="primary",loading:s,children:a,...i}){return r.jsx("button",{className:n()("btn",{"btn-primary":"primary"===t,"btn-secondary":"secondary"===t,"btn-loading":s},e),disabled:s||i.disabled,...i,children:a})}},84231:(e,t,s)=>{"use strict";s.d(t,{I:()=>i});var r=s(10326),a=s(48029),n=s.n(a);function i({label:e,error:t,className:s,...a}){return(0,r.jsxs)("label",{className:"field",children:[e&&r.jsx("span",{className:"field-label",children:e}),r.jsx("input",{className:n()("field-input",s,{"field-error":!!t}),...a}),t&&r.jsx("span",{className:"field-hint",children:t})]})}},9007:(e,t,s)=>{"use strict";s.d(t,{$:()=>a});var r=s(10326);function a(){return r.jsx("span",{className:"spinner","aria-hidden":"true"})}},78998:(e,t,s)=>{"use strict";s.d(t,{F:()=>i});var r=s(10326),a=s(48029),n=s.n(a);function i({message:e,variant:t="info",onClose:s}){return(0,r.jsxs)("div",{className:n()("toast",`toast-${t}`),children:[r.jsx("span",{children:e}),s&&r.jsx("button",{className:"toast-close",onClick:s,"aria-label":"Close notification",children:"\xd7"})]})}},6824:(e,t,s)=>{"use strict";s.d(t,{N:()=>n});let r=process.env.NEXT_PUBLIC_API_URL??"http://localhost:8000",a=process.env.NEXT_PUBLIC_JWT;async function n(e){let t;let s=`${r}${e.path}`,n={...e.headers??{}};a&&(n.Authorization=`Bearer ${a}`),e.body instanceof FormData?t=e.body:void 0!==e.body&&(n["Content-Type"]="application/json",t=JSON.stringify(e.body));let i=await fetch(s,{method:e.method??"GET",headers:n,body:t}),l=i.headers.get("content-type")?.includes("application/json")?await i.json():await i.text();return i.ok?{ok:!0,status:i.status,data:l}:{ok:!1,status:i.status,error:"string"==typeof l?l:l?.detail??"Request failed"}}},11506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(19510),a=s(57371);function n({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{children:(0,r.jsxs)("div",{className:"app-shell",children:[(0,r.jsxs)("header",{className:"app-header",children:[r.jsx("h1",{children:"GraphRAG 1C Console"}),(0,r.jsxs)("nav",{children:[r.jsx(a.default,{href:"/upload",children:"Upload & Index"}),r.jsx(a.default,{href:"/qa",children:"Q&A"})]})]}),r.jsx("main",{className:"app-main",children:e})]})})})}s(7633)},16863:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var r=s(68570);let a=(0,r.createProxy)(String.raw`E:\Code\1C\sgr-deep-research\frontend\app\qa\page.tsx`),{__esModule:n,$$typeof:i}=a;a.default;let l=(0,r.createProxy)(String.raw`E:\Code\1C\sgr-deep-research\frontend\app\qa\page.tsx#default`)},7633:()=>{},48029:(e,t)=>{var s;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var s=arguments[t];s&&(e=n(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var s in e)r.call(e,s)&&e[s]&&(t=n(t,s));return t}(s)))}return e}function n(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0!==(s=(function(){return a}).apply(t,[]))&&(e.exports=s)}()}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,707],()=>s(18223));module.exports=r})();