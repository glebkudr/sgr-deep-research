(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{4513:function(e,t,n){Promise.resolve().then(n.bind(n,9752))},9752:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(7437),s=n(2265),i=n(4308),a=n(9156),l=n(5101),o=n(3034),c=n(6264);function u(){let[e,t]=(0,s.useState)(""),[n,u]=(0,s.useState)(""),[d,h]=(0,s.useState)(12),[p,f]=(0,s.useState)(2),[m,x]=(0,s.useState)(!1),[v,j]=(0,s.useState)(null),[y,g]=(0,s.useState)(null),b=async()=>{if(g(null),j(null),!e.trim()||!n.trim()){g("Specify both collection and question.");return}x(!0);let t={collection:e.trim(),question:n.trim(),top_k:d,max_hops:p},r=await (0,c.N)({path:"/qa",method:"POST",body:t});if(x(!1),!r.ok||!r.data){var s;g(null!==(s=r.error)&&void 0!==s?s:"Request failed.");return}j(r.data)};return(0,r.jsxs)("div",{className:"stack",children:[y&&(0,r.jsx)(o.F,{message:y,variant:"error",onClose:()=>g(null)}),(0,r.jsxs)("section",{className:"panel stack",children:[(0,r.jsx)("h2",{children:"Ask a Question"}),(0,r.jsx)("p",{className:"text-muted",children:"The answer will be generated in Russian strictly from indexed context. When evidence is missing the model returns the refusal phrase."}),(0,r.jsx)(a.I,{label:"Collection",value:e,onChange:e=>t(e.target.value)}),(0,r.jsxs)("label",{className:"field",children:[(0,r.jsx)("span",{className:"field-label",children:"Question"}),(0,r.jsx)("textarea",{className:"field-input",rows:5,value:n,onChange:e=>u(e.target.value),placeholder:"Example: Which routines write to register Sales.Turnover?"})]}),(0,r.jsxs)("div",{className:"inline",children:[(0,r.jsx)(a.I,{label:"Top K (vectors)",type:"number",min:1,max:50,value:d,onChange:e=>h(Number(e.target.value)),style:{maxWidth:"140px"}}),(0,r.jsx)(a.I,{label:"Max hops (graph)",type:"number",min:0,max:4,value:p,onChange:e=>f(Number(e.target.value)),style:{maxWidth:"140px"}})]}),(0,r.jsx)(i.z,{onClick:b,loading:m,disabled:m,children:"Ask"})]}),m&&(0,r.jsxs)("section",{className:"panel inline",style:{alignItems:"center"},children:[(0,r.jsx)(l.$,{}),(0,r.jsx)("span",{children:"Generating answerâ€¦"})]}),v&&!m&&(0,r.jsxs)("section",{className:"panel stack",children:[(0,r.jsxs)("header",{children:[(0,r.jsx)("h2",{children:"Answer"}),(0,r.jsxs)("p",{className:"text-muted",children:["Confidence: ",(100*v.confidence).toFixed(1),"%"]})]}),(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("p",{children:v.answer})}),(0,r.jsxs)("div",{className:"card stack",children:[(0,r.jsx)("h3",{children:"Citations"}),0===v.citations.length?(0,r.jsx)("p",{className:"text-muted",children:"No supporting chunks were returned."}):v.citations.map((e,t)=>(0,r.jsxs)("div",{className:"citation",children:[(0,r.jsx)("h4",{children:e.title}),e.path&&(0,r.jsx)("p",{className:"text-muted",children:e.path}),(0,r.jsx)("p",{children:e.snippet})]},"".concat(e.title,"-").concat(t)))]}),(0,r.jsxs)("div",{className:"card stack",children:[(0,r.jsx)("h3",{children:"Graph Paths"}),0===v.graph_paths.length?(0,r.jsx)("p",{className:"text-muted",children:"No related graph context was found."}):v.graph_paths.map((e,t)=>(0,r.jsxs)("div",{className:"graph-path",children:[(0,r.jsxs)("strong",{children:["Path ",t+1]}),(0,r.jsx)("ul",{children:e.nodes.map(e=>{var t;return(0,r.jsxs)("li",{children:[e.label,": ",null!==(t=e.title)&&void 0!==t?t:e.id]},e.id)})}),(0,r.jsx)("div",{className:"text-muted",children:e.edges.map(e=>"".concat(e.source," -[").concat(e.type,"]-> ").concat(e.target)).join(" | ")})]},t))]}),v.cypher_used.length>0&&(0,r.jsxs)("div",{className:"card stack",children:[(0,r.jsx)("h3",{children:"Cypher Queries"}),(0,r.jsx)("ul",{className:"file-list",children:v.cypher_used.map((e,t)=>(0,r.jsx)("li",{style:{whiteSpace:"pre-wrap"},children:e},t))})]})]})]})}},4308:function(e,t,n){"use strict";n.d(t,{z:function(){return a}});var r=n(7437),s=n(6800),i=n.n(s);function a(e){let{className:t,variant:n="primary",loading:s,children:a,...l}=e;return(0,r.jsx)("button",{className:i()("btn",{"btn-primary":"primary"===n,"btn-secondary":"secondary"===n,"btn-loading":s},t),disabled:s||l.disabled,...l,children:a})}},9156:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var r=n(7437),s=n(6800),i=n.n(s);function a(e){let{label:t,error:n,className:s,...a}=e;return(0,r.jsxs)("label",{className:"field",children:[t&&(0,r.jsx)("span",{className:"field-label",children:t}),(0,r.jsx)("input",{className:i()("field-input",s,{"field-error":!!n}),...a}),n&&(0,r.jsx)("span",{className:"field-hint",children:n})]})}},5101:function(e,t,n){"use strict";n.d(t,{$:function(){return s}});var r=n(7437);function s(){return(0,r.jsx)("span",{className:"spinner","aria-hidden":"true"})}},3034:function(e,t,n){"use strict";n.d(t,{F:function(){return a}});var r=n(7437),s=n(6800),i=n.n(s);function a(e){let{message:t,variant:n="info",onClose:s}=e;return(0,r.jsxs)("div",{className:i()("toast","toast-".concat(n)),children:[(0,r.jsx)("span",{children:t}),s&&(0,r.jsx)("button",{className:"toast-close",onClick:s,"aria-label":"Close notification",children:"\xd7"})]})}},6264:function(e,t,n){"use strict";n.d(t,{N:function(){return l}});var r,s=n(357);let i=null!==(r=s.env.NEXT_PUBLIC_API_URL)&&void 0!==r?r:"http://localhost:8000",a=s.env.NEXT_PUBLIC_JWT;async function l(e){var t,n,r,s;let l;let o="".concat(i).concat(e.path),c={...null!==(n=e.headers)&&void 0!==n?n:{}};a&&(c.Authorization="Bearer ".concat(a)),e.body instanceof FormData?l=e.body:void 0!==e.body&&(c["Content-Type"]="application/json",l=JSON.stringify(e.body));let u=await fetch(o,{method:null!==(r=e.method)&&void 0!==r?r:"GET",headers:c,body:l}),d=(null===(t=u.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"))?await u.json():await u.text();return u.ok?{ok:!0,status:u.status,data:d}:{ok:!1,status:u.status,error:"string"==typeof d?d:null!==(s=null==d?void 0:d.detail)&&void 0!==s?s:"Request failed"}}},357:function(e,t,n){"use strict";var r,s;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(s=n.g.process)?void 0:s.env)?n.g.process:n(8081)},8081:function(e){!function(){var t={229:function(e){var t,n,r,s=e.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var o=[],c=!1,u=-1;function d(){c&&r&&(c=!1,r.length?o=r.concat(o):u=-1,o.length&&h())}function h(){if(!c){var e=l(d);c=!0;for(var t=o.length;t;){for(r=o,o=[];++u<t;)r&&r[u].run();u=-1,t=o.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];o.push(new p(e,t)),1!==o.length||c||l(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var i=n[e]={exports:{}},a=!0;try{t[e](i,i.exports,r),a=!1}finally{a&&delete n[e]}return i.exports}r.ab="//";var s=r(229);e.exports=s}()},6800:function(e,t){var n;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=i(t,n));return t}(n)))}return e}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0!==(n=(function(){return s}).apply(t,[]))&&(e.exports=n)}()}},function(e){e.O(0,[971,23,744],function(){return e(e.s=4513)}),_N_E=e.O()}]);